---
marp: true
---

# 第4回 特別講義

### 本日のゴール
**C言語基礎：関数を作成することができるようになる**

---

## 関数とは

実はC言語は関数の塊

関数と言っても大きく２つの書き方がある。
1. 関数を作るための書き方
2. 関数を使うための書き方

---

## 関数を作る書き方
main関数も他の関数も基本の型は同じ

```c
int main(void)
{
    return 0;
}
```

```c
関数の型 関数名(引数)
{
    return 戻り値;
}
```

---
## sumという名前の関数を作ってみた場合
* sum関数の仕様は以下とする
* ２つの整数値の引数をとり、その引数を足した合計値を戻す

上記の条件を満たす関数の作り方をSTEPに分けて解説します。

### STEP1 まずは型をコピー
```c
関数の型 関数名(引数)
{
    return 戻り値;
}
```
---
### STEP2 sum関数なので名前を変えてみる
```c
関数の型 sum(引数)
{
    return 戻り値;
}
```
---
### STEP3 ２つの整数を取るための変数を用意して引数とする
変数は整数なのでint型 a や b は変数名なので任意の文字で作れる（別にaやb以外でも良い。本当は意味がわかる名前をつけると良い、例えば、left, right など）
```c
関数の型 sum(int a, int b)
{
    return 戻り値;
}
```
---
### STEP4 戻り値を準備する
戻り値は、その関数が実行した結果を返す時に必要なものです。ただし、関数によっては戻り値がなくても構わないものもあります。今回は戻り値がある場合について解説します。

```c
関数の型 sum(int a, int b)
{
    int result; 
    result = a + b;
    return result;
}
```
上記は引数のaと引数のbを結果を代入する為の変数 result に入れて結果を返してます。result は int型の変数でint型を戻り値として結果を返してます。

---

### STEP5 戻り値の型が決まれば関数の型が決まる
resultはint型だったので、関数の型もintになります。
```c
int sum(int a, int b)
{
    int result; 
    result = a + b;
    return result;
}
```

---

### 戻り値がない場合
それでは、次に戻り値が無い場合を考えてみましょう。
sum関数は引数aとbを受け取って結果を数値として返す関数でした。
それを結果を出力するだけの関数にしてみます。
どのように変更すれば良いかみてみましょう。
```c
void sum(int a, int b)
{
    int result; 
    result = a + b;
    printf("%d + %d = %d", a, b, result);
}
```
この関数は、return をしてないので戻り値がありません。その場合の関数の型はvoidを使います。

---

### リファクタリング
実はこんな書き方もできるというので上記の説明で使ったプログラムの別の書き方をご紹介します。
以下のファイルは画面出力と同時に結果も返す型に変えてます。が結果を返す変数を省略して直接計算結果を戻してる例です。
```c
int sum(int a, int b)
{
    printf("%d + %d = %d", a, b, a + b);
    return a + b;
}

---

## 関数の定義の方法がわかったので次は関数の使い方
先ほどのsum関数を使う時はどのように書けば良いでしょう？

呼び出し方法は簡単です。関数名を使って呼び出します。

```c

関数名(引数);

```

---

先ほどのsum関数の場合の例、引数aに1を引数bに2を渡してる場合

```c

sum(1, 2);

```

---

### main関数からの呼び出し
続いて、main関数からsum関数を呼び出せるようにしましょう。

```c
#include <stdio.h>

int sum(int a, int b){
    return a+b;
}

void main(void) {
    sum(1, 2);
}

```

このように,```関数名(引数)```で呼び出しできます。

---

### main関数とsum関数の定義場所の関係
今度は、sum関数の定義をmain関数の後に書いてみます。

```c
#include <stdio.h>

void main(void) {
    sum(1, 2);
}

int sum(int a, int b){
    return a+b;
}

```

---

#### コンパイルエラーが出ましたよね？
これは、プログラムは上から順に実行される為、sum関数の定義の前に存在する「sum関数の呼び出し文」が存在しないと判断されてしまう為です。

---
### プロトタイプ宣言
main関数より前に定義しないと自作関数が使えないとmain関数の前に必ず書かないといけなくなります。
関数がたくさんある場合、常に順序関係を気にかけて、
必要な関数を先頭に持ってくるのは面倒です。

どんな関数が作られているのか、前もって一覧にしておくようにすれば、
いちいち関数を前に書いたり後に書いたりする心配はなくなります。
関数の一覧を作るには、関数の形を、プログラムの初めの方に並べます。

---
### プロトタイプ宣言の書き方



```c
#include <stdio.h>

/* プロトタイプ宣言 */
int sum(int,int);

void main(void) {
    sum(1, 2);
}

int sum(int a, int b){
    return a+b;
}

```

---




